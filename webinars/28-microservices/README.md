.center.icon[![otus main](img/main.png)]

---

class: top white
background-image: url(img/sound.svg)
background-size: 130%
.top.icon[![otus main](img/logo.png)]

.sound-top[
  # Как меня слышно и видно?
]

.sound-bottom[
  ## > Напишите в чат
  ### **+** если все хорошо
  ### **-** если есть проблемы cо звуком или с видео
  ### !проверить запись!
]

---

class: white
background-image: url(img/message.svg)
.top.icon[![otus main](img/logo.png)]

# Монолит и микросервисы

### Желтак Артем

---

# План занятия

.big-list[
* Монолит и микросервисы
* Плюсы и минусы микросервисной архитектуры
* 12 Factor application
* Serverless
]

---

# Микросервисы и монолит

.main-image[
 ![img/slide2.png](img/slide2.png)
]


---

# Микросервисы: отличия

.big-list[
* Микро не обязательно про размер, но про зону ответственности
* Самодостаточны, идеальны для горизонтального масштабирования
* Разные технологии для разных задач
* Распределенная кодовая база
]
---

# Микросервисы: плюсы

.big-list[
* Независимая разработка
* Независимое развёртывание
* Независимая масштабируемость
* Повторное использование
* Проще юнит тестирование
]

---

# Микросервисы: минусы

.big-list[
* Возросшая сложность для тестирования
* Возросшая сложность для разработчиков
* Возросшая сложность для эксплуатации/Devops
* Выше требования к компетенции
]

---

# Микросервисы: ирония

.big-list[
* **2014** - нужно внедрить микросервисы для решения проблем с монолитами.
* **2016** - нужно внедрить Docker, чтобы решить проблемы с микросервисами.
* **2018** - нужно внедрить Kubernetes, чтобы решить проблемы с Docker.
* **2021** - что дальше?
]

---

# Микросервисы: отличия ( минусы часть 2)

.big-list[
* Удаленные вызовы дороже локального исполнения
* Реальные системы обычно не имеют чётко определённых границ
* Сложности stateful 
* Версионность и работа с ней
* Сложности взаимодействия между сервисами
* Распределенные транзакции
* Попытка замаскировать монолит
]

---

# Микросервисы: переходить?

.big-list[
* Размер команды
* Stateless
* У вас одно приложение или несколько?
* Монолитные зависимости и границы сервисов
* Есть ли компетенции на уровне DevOps?
]

---

# 12 факторные приложения

 #### 1. Кодовая база
Одна кодовая база, отслеживаемая в системе контроля версий, – множество развёртываний.

<br>

 #### 2. Работа с зависимостями
Явно объявляйте и изолируйте зависимости.

<br>

 #### 3. Конфигурация
Сохраняйте конфигурацию в среде выполнения.

<br>

 #### 4. Сторонние службы (Backing Services)
Считайте сторонние службы (backing services) подключаемыми ресурсами.
---

# 12 факторные приложения

 #### 5. Сборка, релиз, выполнение
Строго разделяйте стадии сборки и выполнения.

<br>

 #### 6. Процессы
Запускайте приложение как один или несколько процессов, 
не сохраняющих внутреннее состояние (stateless).

<br>

 #### 7. Привязка портов
Экспортируйте сервисы через привязку портов.

<br>

 #### 8. Параллелизм
Масштабируйте приложение с помощью процессов.

---

# 12 факторные приложения

 #### 9. Утилизируемость
Максимизируйте надёжность с помощью быстрого запуска и корректного завершения работы.

<br>

 #### 10.  Паритет разработки/работы приложения
Держите окружения разработки, промежуточного развёртывания (staging) и 
рабочего развёртывания (production) максимально похожими.

<br>

 #### 11. Журналирование
Рассматривайте журнал как поток событий.

<br>

 #### 12. Задачи администрирования
* Выполняйте задачи администрирования/управления с помощью разовых процессов.
* Разовые процессы администрирования должны подчиняться тем же правилам, что и остальные
процессы разработки.
* Не забываем про зависимости и конфигурацию данных процессов.

---

# Serverless

.big-list[
* Сервер все-таки есть
* Function as Service
* Долгий запуск, короткое время жизни
* Нет зависимости от инфраструктуры, но есть vendor lock
]
---
# Serverless: Область применения

.big-list[
* Сократить простой ресурсов
* Ускорить разработку (писать нужно только бизнес логику)
* Масштабирование никогда не было таким простым
* Не подходит для realtime систем
]
---
# Ссылки

.big-list[
* [https://12factor.net/ru/](https://12factor.net/ru/)
* [https://habr.com/ru/company/flant/blog/347518/](https://habr.com/ru/company/flant/blog/347518/)
* [https://habr.com/ru/company/selectel/blog/452266/](https://habr.com/ru/company/selectel/blog/452266/)
* [https://habr.com/ru/post/305826/](https://habr.com/ru/post/305826/)
]
---

# Опрос

.left-text[
Заполните пожалуйста опрос
<br><br>
https://otus.ru/polls/????/
]

.right-image[
![](img/gopher7.png)
]

---

class: white
background-image: url(img/message.svg)
.top.icon[![otus main](img/logo.png)]

# Спасибо за внимание!
